<mat-card style="width: 95%; " class="mat-elevation-z4">

    <div style=" margin-top: -5px; display: flex;">
       
        <div class="status-bar" [ngStyle]="{'background-color':getColorSR(status)}"></div>
        
        <div style="display: flex;">
            <div style=" margin-top: 5px; text-align: center; width: 100px;"><p id="nroPedido">Nro {{idOrder}}</p></div>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px;color: #0460ca;" *ngIf="disabled && status=='Pendiente'" matTooltip="Asignar"(click)="openAssign()"><mat-icon style="font-size: 30px;">person_add_alt</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px; color: rgb(140, 219, 21)" *ngIf="disabled && status=='Enviando'"matTooltip="Finalizar pedido" (click)="finalizeOrder()"><mat-icon style="font-size: 30px;">task</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px;color: red;" *ngIf="disabled && status=='Pendiente'"matTooltip="Cancelar" (click)="cancelOrder()"><mat-icon style="font-size: 30px;">cancel</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px;color: #0460ca;" *ngIf="disabled && status=='En curso'"matTooltip="Delivery asignado" ><mat-icon style="font-size: 30px;">how_to_reg</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px;color: green; " *ngIf="disabled && status=='En curso'"matTooltip="Aceptar" (click)="orderSent()"><mat-icon style="font-size: 30px;">check_circle_outline</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px;color: rgb(59, 48, 207); " *ngIf="disabled && status=='En curso'"matTooltip="Reasignar" (click)="orderReassign()"><mat-icon style="font-size: 30px;">delivery_dining</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px;color: red;" *ngIf="status=='En curso' && disabled || disabled && status=='Enviando'"matTooltip="Cancelar" (click)="cancelOrderInProgress()"><mat-icon style="font-size: 30px;">cancel</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px;color: green; " *ngIf="buttons"matTooltip="Aceptar" (click)="acceptOrder()"><mat-icon style="font-size: 30px;">check_circle_outline</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px; color: red;" *ngIf="buttons"matTooltip="Rechazar" (click)="rejectOrder()"><mat-icon style="font-size: 30px;">highlight_off</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px; color: rgb(247, 220, 72);" *ngIf="complete"matTooltip="AÃ±adir Emergencia" (click)="addEmergency()"><mat-icon style="font-size: 30px;">feedback</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px; color: green;" *ngIf="complete"matTooltip="Finalizar" (click)="completeOrder()"><mat-icon style="font-size: 30px;">task</mat-icon></button>
            <button mat-icon-button style="margin-top: -4px; margin-right: -2px; color: rgb(0, 41, 128);" *ngIf="orderCompleted"matTooltip="Pedido Finalizado"><mat-icon style="font-size: 30px;">done_outline</mat-icon></button>
            
        </div>

    </div>
    <div style="text-align: end;">
        <button mat-button class="button" *ngIf="linkAdmin!=undefined && statusDiferent" (click)="openLink(linkAdmin)" ><mat-icon>whatsapp</mat-icon> Contactar Admin</button>
        <button mat-button class="button" *ngIf="linkClient!=undefined && statusDiferent" (click)="openLink(linkClient)"><mat-icon>whatsapp</mat-icon> Contactar Cliente</button>
        <button mat-button class="button" *ngIf="linkDelivery!=undefined && statusDiferent" (click)="openLink(linkClient)"><mat-icon>whatsapp</mat-icon> Contactar Delivery</button>
    </div>
    <div style="text-align: end; margin-top: 10px;">
        <button mat-button class="button-payment" *ngIf="linkAdmin!=undefined && statusDiferent && status!='Pendiente'" (click)="openPayment()" ><mat-icon>payment</mat-icon> Ver forma de pago</button>
    </div>
    <mat-card-header style="margin-left: -17px; ">
        
            <mat-card-title ><h3 style="color: #0460ca;">Pedido del: {{warehouseName}}</h3> 
                
            </mat-card-title>
            <mat-card-subtitle><h4> Sector: {{sectorName}}</h4></mat-card-subtitle>
            
    </mat-card-header>
    

    <mat-card-content class="content">
        
        <!-- <div>
            <p>Solicitante: <b>username</b></p>
            <p>Total Estimado: <b>Bs. 1000</b></p>
        </div> -->
        <div class="items">
            
                <mat-grid-list [cols]="1" rowHeight="100px" gutterSize="10px">
      
                    <mat-grid-tile *ngFor="let product of productsCart" >
                        <app-item-card [disabledQuantity]="true" [units]="product.units"[idProduct]="product.idProduct" [productName]="product.productName"[description]="product.description" [image]='"data:image/jpg;base64,"+product.image' 
                        [measurement]="product.measurement" [price]="product.subtotal/product.units"[index]="positionItem" (deleteProductEvent)="deleteProduct($event)"
                        ></app-item-card>
                    </mat-grid-tile>
              
                </mat-grid-list>


                <div class="user" *ngIf="disabled||buttons">
                    <h3>Detalle del Usuario</h3>
                <li>Nombre:
                    <span class="subtotal">{{userName}}</span>
                </li>
                <li>telefono:
                    <span class="subtotal">{{telephone}} </span>
                </li>
                <li>Email:
                    <span class="subtotal">{{email}} </span>
                </li>
                
            </div>
        </div>
        <mat-divider vertical></mat-divider>
        <div class="details">
            <h3>Detalle del pedido</h3>
            <li>Total productos({{orderDetail.length}})
                <span class="subtotal">{{totalPrice}} Bs.</span>
            </li>
            
            <li>Gastos de Envio
                <span class="subtotal">{{shippingCost}} Bs.</span>
                <span class="detailspan">dependiendo de su ubicacion se aplicaran los correspondientes gastos de envio</span>
            </li>
            <li class="totals">
                <span class="totalprice">Total:</span>
                <span class="totalprice">{{totalPrice+shippingCost}} Bs.</span>
            </li>
        </div>
    </mat-card-content>
    <div style="text-align: end;" >
        <p id="status" [ngStyle]="{'color':getColorSR(status)}">{{status}}</p>
        <p id="fecha">Fecha de pedido:  {{orderDate}}</p>
    </div>

  </mat-card>
