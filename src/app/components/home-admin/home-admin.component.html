

<div class="main">
    
    <div class="container" >
        <h2 style="font-weight: 500;">Informacion general</h2>
        <!--RolesPermisos-->
        <mat-grid-list cols="3" rowHeight="300"   gutterSize="15px"  >
            <mat-grid-tile rowspan="1" colspan=2 class="mat-elevation-z5"  >
                <div class="card">
                    <div class="card--header">
                        <mat-card-title style="margin-top: 5px;">Roles/Privilegios</mat-card-title>
    
                        <button class="btn-add" mat-raised-button (click)="openRegisterRole()"><mat-icon>add</mat-icon> ROL</button>
                    </div>
                    <mat-divider></mat-divider>

                    <div class="container-table">
                        <table mat-table [dataSource]="dataSourceRole" class="mat-elevation-z5" style="width: min-content">
    
                        <ng-container matColumnDef="index" >
                            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 20px;font-weight: bold;"> Nro </th>
                            <td mat-cell *matCellDef="let element;let i=index;" style="text-align: center;" > {{i+1}} </td>
                        </ng-container>
    
                        <ng-container *ngFor="let columna of columnasRole" matColumnDef="{{columna.name}}" >
                          <th mat-header-cell *matHeaderCellDef style="text-align: center;  min-width: 150px; font-weight: bold;"> {{columna.titulo}}  </th>
                          <td mat-cell *matCellDef="let element" style="min-width: 85px;text-align: center;height: 40px;"> {{element[columna.name]}} </td>
                        </ng-container>

                        <ng-container matColumnDef="privileges" >
                            <th mat-header-cell *matHeaderCellDef style="min-width: 70px;   text-align: center;font-weight: bold;"> PRIVILEGIOS </th>
                            <td mat-cell *matCellDef="let element   " style="text-align: center;height: 40px; " >
                                <button mat-icon-button type="button"  [matMenuTriggerFor]="menu" >
                                    <mat-icon matSuffix style="color:#0460ca;">vpn_key</mat-icon>
                                </button>
                                <mat-menu #menu="matMenu">
                                    <button mat-menu-item  *ngFor=" let priv of element.privilege ">
                                        <mat-icon matSuffix  >check_box</mat-icon>
                                        {{priv.privilege}}
                                    </button>
                                </mat-menu>
                                  
                             </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
                        <!-- <ng-container matColumnDef="edit" >
                            <th mat-header-cell *matHeaderCellDef style="min-width: 85px;   text-align: center;font-weight: bold;"> EDITAR </th>
                            <td mat-cell *matCellDef="let element   " style="text-align: center; " > 

                               
                                <button mat-icon-button matSuffix  >
                                    <mat-icon style="color:rgb(197, 33, 33);" >edit</mat-icon>
                                </button>

                             </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container> -->
                  
                        
                        <tr mat-header-row *matHeaderRowDef="displayedColumnsRole"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsRole;"></tr>
                      </table>
                    </div>

                </div>
    
            </mat-grid-tile >

             <!--Sectores-->
             <mat-grid-tile rowspan="1"colspan=1 class="mat-elevation-z5"   >
                <div class="card">
                    <div class="card--header">
                        <mat-card-title style="margin-top: 5px;" >Sectores</mat-card-title>
                            
                        <button class="btn-add" mat-raised-button (click)="openRegisterSector()"><mat-icon>add</mat-icon> SECTOR</button>
                    </div>
                    <mat-divider></mat-divider>                
                    <div style="margin-top: 15px;">
                        <div style="height: 200px; overflow: scroll; overflow-x: hidden;    ">
                        <mat-grid-list cols="1" rowHeight="83px" gutterSize="7px">
                            
                            <mat-grid-tile *ngFor="let unit of units"  >
                                
                                <div class="card-unit" >
                                    <h4 class="title-unit" style="line-height: 0px;"><mat-icon> pin_drop</mat-icon>{{unit.sectorName}}</h4>
                                    
                                    <div   *ngIf="unit.responsable!==null" style="display: flex; height: 18px; "><h4 >Sector: <p>{{unit.sectorName}}</p></h4></div>

                
                                </div>
                                
                            </mat-grid-tile>
                            
                        </mat-grid-list>
                    </div>
                    </div>
                </div>

            </mat-grid-tile>


            <!--USuarios-->
            <mat-grid-tile colspan="3"  class="mat-elevation-z5"   >
                <div class="card">
                    <div class="card--header">
                        <mat-card-title style="margin-top: 5px;">Usuarios</mat-card-title>
    
                        <button class="btn-add" mat-raised-button (click)="openRegisterUser()"><mat-icon>add</mat-icon>USUARIO</button>
                    </div>
                    <mat-divider></mat-divider>
                    <div  style="height: 200px; overflow: scroll; overflow-x: hidden;    ">
                        <table mat-table [dataSource]="dataSource" class="mat-elevation-z5" style="width:90%">
    
                        <ng-container matColumnDef="index" >
                            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 40px;font-weight: bold;"> Nro </th>
                            <td mat-cell *matCellDef="let element;let i=index;" style="text-align: center;" > {{i+1}} </td>
                        </ng-container>
    
                        <ng-container *ngFor="let columna of columnas" matColumnDef="{{columna.name}}" >
                          <th mat-header-cell *matHeaderCellDef style="text-align: center;  min-width: 100px; font-weight: bold;"> {{columna.titulo}}  </th>
                          <td mat-cell *matCellDef="let element" style="min-width: 85px;text-align: center;"> {{element[columna.name]}} </td>
                        </ng-container>
                        <ng-container matColumnDef="actions" >
                            <th mat-header-cell *matHeaderCellDef style="min-width: 85px;   text-align: center;font-weight: bold;"> ACCIONES </th>
                            <td mat-cell *matCellDef="let element" style="text-align: center; " > 

                               
                                <button mat-icon-button matSuffix  matTooltip="Editar">
                                    <mat-icon style="color:#0460ca;" (click)="openEditUser(element)">edit</mat-icon>
                                </button>
                                <button mat-icon-button matSuffix matTooltip="Dar de baja" [disabled]="element.index==1">
                                    <mat-icon style="color:rgb(197, 33, 33)"(click)="deleteUser(element.idUser)" >person_remove</mat-icon>
                                </button>

                             </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
    
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                      </table></div>

                </div>
            </mat-grid-tile>
      
            
        </mat-grid-list>
    </div>
</div>

